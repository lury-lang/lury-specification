# 行構造

Lury ではブロックを行の構造で表現します。
行の構造は各行の冒頭にある、空白文字を使った *インデントの文字数* によって表現します。

## 改行文字

改行文字とは `\r`、`\n` または `\r\n` などを指します。
コンパイラは `\r\n` を `\r` と `\n` と 2 つに分割して解釈してはいけません。

*改行文字* とは前述の通り、`\r`、`\n` または `\r\n` などのバイト列そのものを指すものとしてここでは用います。

*行終端* とは改行文字をトークン化したものとしてここでは用います。

## 物理行

__物理行 (physical line)__ とは、文字列において改行文字に区切られた部分文字列のことです。
文字列に改行文字が含まれていない場合は、その文字列自体が部分文字列、すなわち行数 1 をもつ文字列とみなします。
`行数 = 改行文字数 + 1` の関係が成り立ちます。

## 論理行

__論理行 (logical line)__ とは、トークン `NEWLINE` で区切られたトークン列上の行のことです。
1つの論理行には1つの単純文 (simple statement) および 変形した複合文 (compound statement) のみ記述できます。
単純文を、後述する行終端のキャンセルなしに、複数の論理行に跨って記述することはできません。

## 行終端のキャンセル

行終端をキャンセルし、2つの物理行を1つの論理行へ連結可能なトークンがあります。バックスラッシュ `\` と、各種の演算子です。
前者を *明示的な行連結*、後者を *暗黙的な行連結* と呼びます。

行連結は2行以上連続して指定することができます。

## NEWLINE

字句解析器は連続した `NEWLINE` トークンを出力してはいけません。
`NEWLINE` トークンが2つ以上連続する場合は最初の1つのみ出力されます。

また、`NEWLINE` と `EOF` トークンが連続する場合は、`EOF` トークンのみが出力されます。
